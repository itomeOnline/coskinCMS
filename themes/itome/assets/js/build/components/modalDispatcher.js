var app=function(){"use strict";class e{constructor(e){this.el=e,this.needOverlay=!e.dataset.modalNoOverlay,this.parentModal=e.dataset.parentModal,this.clickedToggle=null,this.firstInput=this.el.querySelector("input, textarea")}get isActive(){return this.el.classList.contains("is-active")}set isActive(e){e?(this.el.classList.add("is-active"),this.firstInput&&setTimeout((()=>{this.firstInput.focus()}),100)):(this.el.classList.remove("is-active"),this.clickedToggle&&this.clickedToggle.classList.remove("is-clicked"),this.el.querySelector(".on-success")&&setTimeout((e=>{this.el.querySelector(".on-success").classList.remove("on-success")}),500))}get isOnActiveChild(){return this.el.classList.contains("on-active-child")}set isOnActiveChild(e){e?this.el.classList.add("on-active-child"):this.el.classList.remove("on-active-child")}}return function(){let t,s,a,l,o=null,d=document.querySelector(".modals"),i={};function n(t){let s=t.dataset.modal;(function(e){return void 0!==i[e]})(s)||(i[s]=new e(t))}function c(e){o&&(o===i[e.parentModal]?i[e.parentModal].isOnActiveChild=!0:(o.parentModal&&i[o.parentModal].isActive&&r(i[o.parentModal]),r())),e.el.dataset.addBodyClass&&document.body.classList.add(e.el.dataset.addBodyClass),(l&&!e.el.hasAttribute("data-add-body-class")||e.el.hasAttribute("data-add-body-class")&&l!==e.el.dataset.addBodyClass)&&document.body.classList.remove(l),e.el.dataset.addBodyClass&&(l=e.el.dataset.addBodyClass),e.isActive=!0,o=e,v()}function r(e){o.parentModal?(i[o.parentModal].isOnActiveChild=!1,o.isActive=!1,o=i[o.parentModal]):m(),v()}function u(e=null){e?r():m()}function m(e){if((!e||1===e.which)&&o){if(o.isActive=!1,i[o.parentModal]&&(i[o.parentModal].isActive=!1,i[o.parentModal].isOnActiveChild=!1),o.el.querySelector("video")&&o.el.querySelector("video").pause(),o.el.dataset.addBodyClass){const e=o.el.dataset.addBodyClass;setTimeout((t=>{o&&o.el.dataset.addBodyClass!==e?document.body.classList.remove(e):o||document.body.classList.remove(e)}),500)}o=null,v()}}function v(){t&&(o&&o.needOverlay?(t.classList.add("is-active"),document.querySelector("html").style.overflowY="hidden",document.querySelector("html").style.touchAction="none",a&&(a.style.willChange="transform")):(t.classList.remove("is-active"),document.querySelector("html").style.overflowY="unset",document.querySelector("html").style.touchAction="",a&&(a.style.willChange="")))}function y(e){let t=e.pageX,l=e.pageY,o=s.left,d=s.top,i=t-o-a.offsetWidth/2,n=l-d-a.offsetHeight/2;a.style.transform="translate3d("+i+"px, "+n+"px, 0)"}function h(){a.style.display="none"}function f(){a.style.display=""}function p(){document.addEventListener("click",(function(e){if(console.log("test"),1===e.which){let a=e.target.closest("[data-linked-modal]");a&&i[a.dataset.linkedModal]&&(a.classList.add("is-clicked"),i[a.dataset.linkedModal].clickedToggle=a,c(i[a.dataset.linkedModal]),e.stopPropagation(),e.preventDefault(),a.dataset.modalSetInputs&&function(e,t){const s=e.el.querySelector("form")?e.el.querySelector("form"):e.el.closest("form");t.forEach((t=>{console.log(e.el);const a=s.querySelector(`[name="${t.key}"]`);a&&(a.value=t.value)}))}(i[a.dataset.linkedModal],JSON.parse(a.dataset.modalSetInputs)),a.dataset.modalFormId&&(t=i[a.dataset.linkedModal],s=a.dataset.modalFormId,t.el.querySelector("form").dataset.formId=s))}var t,s})),document.addEventListener("mousedown",(function(e){if(1===e.which){let t=e.target.closest("[data-modal-close]");if(t)u(i[t.closest("[data-modal]").dataset.modal])}})),document.addEventListener("keyup",(function(e){27==(e=e||window.event).keyCode&&u(o)})),document.addEventListener("needModal",(({detail:e})=>{c(i[e])})),document.addEventListener("needCloseModal",(({detail:e})=>{r(i[e])})),t&&(t.addEventListener("mousedown",m),a&&(s=t.getBoundingClientRect(),t.addEventListener("mousemove",Utils.throttle(y,10)),t.addEventListener("mouseleave",h),t.addEventListener("mouseenter",f)))}return setTimeout((e=>{d.style.opacity=""}),1e3),{init:function(){t=document.getElementById("commonModalOverlay"),a=document.getElementById("commonCloseButton"),function(){i={};let e=document.querySelectorAll("[data-modal]");[].forEach.call(e,n)}(),p()},closeAll:m}}()}();